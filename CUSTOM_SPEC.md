# 学会・カンファレンス検索 API 仕様書

## 概要
学会・カンファレンス情報を自動収集するディープリサーチAPIサーバー。
GETリクエストを受け取り、公式サイトから情報を収集してJSON形式で返却する。

## 基本仕様

### 対象範囲
- **地域**: 日本国内の学会・カンファレンスのみ
- **分野**: 全分野対応（汎用的）
- **データソース**: 学会公式サイトに限定

### 更新頻度
- リアルタイム検索（リクエストごとに最新情報を取得）
- キャッシュなし

## API エンドポイント

### GET /conferences

#### リクエスト
```
GET /conferences
```

**クエリパラメータ**: TBD（現段階では未定義）

#### レスポンス形式
```json
{
  "conferences": [
    {
      "link": "string",
      "name": "string",
      "type": "string",
      "scope": "string",
      "deadline": "string (ISO 8601 date)",
      "term": "string",
      "conference_start_date": "string (ISO 8601 date)",
      "conference_end_date": "string (ISO 8601 date)",
      "icon": "string (URL)",
      "conference_organizer": "string",
      "institution": "string",
      "text": "string",
      "date": "string (ISO 8601 datetime)",
      "read_status": "",
      "labels": [],
      "tags": []
    }
  ],
  "count": 10
}
```

**注意**: `id`フィールドはDB側で発行されるため、API応答には含まれない。

#### 期待される返却数
- 1リクエストあたり **10件以上** の学会・カンファレンス情報

## データフィールド詳細

| フィールド名 | 型 | 説明 | 例 |
|------------|------|------|-----|
| `link` | string | 学会公式サイトのURL | `"https://example-conference.jp"` |
| `name` | string | 学会・カンファレンス名 | `"第50回情報処理学会全国大会"` |
| `type` | string | イベントタイプ | `"国際会議"`, `"国内学会"`, `"ワークショップ"`, `"講演会"`, `"シンポジウム"` など |
| `scope` | string | 参加対象者の範囲 | `"誰でもOK"`, `"学部3年以上"`, `"大学院生のみ"`, `"会員限定"` など |
| `deadline` | string | 応募・申込締切日 | `"2025-12-01"` |
| `term` | string | 開催期間（人間が読みやすい形式） | `"3日間"`, `"2025年3月10日〜12日"` |
| `conference_start_date` | string | 開催開始日 | `"2025-03-10"` |
| `conference_end_date` | string | 開催終了日 | `"2025-03-12"` |
| `icon` | string | アイコン画像のURL（存在する場合） | `"https://example.jp/logo.png"` |
| `conference_organizer` | string | 主催者名 | `"情報処理学会"` |
| `institution` | string | 主催機関 | `"東京大学"`, `"日本学術会議"` |
| `text` | string | 学会の概要・説明文 | `"本学会は情報処理技術の発展を目的として..."` |
| `date` | string | データ取得日時 | `"2025-10-26T10:30:00+09:00"` |
| `read_status` | string | 読了ステータス（クライアント側で管理、初期値は空文字） | `""` |
| `labels` | array[string] | ラベル（クライアント側で管理、初期値は空配列） | `[]` |
| `tags` | array[string] | タグ（クライアント側で管理、初期値は空配列） | `[]` |

## 実装方針

### 検索戦略
1. **検索クエリはAIに任せる**
   - 既存のディープリサーチのプロンプト設定部分を改造
   - 「日本国内の学会・カンファレンス情報を公式サイトから検索する」ように指示
   - 検索クエリの生成はLLMが自動で最適化

2. **データソース制限**
   - 学会公式サイトのみをクロール対象とする
   - WikiCFPなどのアグリゲーションサイトは除外

3. **リアルタイム検索**
   - FirecrawlのSERP機能を活用
   - キャッシュなしで毎回最新情報を取得

### データ抽出
- LLMを使用して公式サイトから構造化データを抽出
- 日本語コンテンツの解析に対応
- 日付形式の正規化（和暦→西暦変換も考慮）
- 欠損データのハンドリング（空文字または妥当なデフォルト値）

### パフォーマンス
- 並列処理により10件以上のデータを効率的に収集
- タイムアウト設定を適切に管理

## 決定事項まとめ
- ✅ ID発行はDB側の責任（API応答には含まない）
- ✅ 検索クエリはAIに任せる（既存プロンプトを改造）
- ✅ `read_status`は空文字`""`、`labels`と`tags`は空配列`[]`で返す
- ✅ クエリパラメータは後回し（まずは固定で10件以上返す）
- ✅ 対象: 日本国内、全分野、公式サイトのみ
- ✅ リアルタイム検索（キャッシュなし）

## エラーハンドリング

### 検索結果が0件の場合
- HTTPステータス: `200 OK`
- レスポンス:
```json
{
  "conferences": [],
  "count": 0
}
```

### タイムアウト / API エラーの場合
- HTTPステータス: `500 Internal Server Error`
- レスポンス:
```json
{
  "error": "エラーが発生しました"
}
```

### 10件に満たない場合
- 見つかった分だけ返す（例: 3件なら3件）
- 将来的に10件見つかるまでリトライする機能を追加予定


